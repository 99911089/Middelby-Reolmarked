<Window x:Class="Reolmarked.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Reolmarked.View"
        mc:Ignorable="d"
        Title="Reolmarked"
        Height="700"
        Width="950"
        Background="LightSteelBlue">

    <!-- ======================= RESOURCES ======================= -->
    <Window.Resources>
        <!-- Converter: bool → Ledig/Optaget -->
        <local:BoolToStatusConverter x:Key="BoolToStatusConverter"/>

        <!-- Knapper -->
        <Style TargetType="Button">
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Background" Value="LightGray"/>
            <Setter Property="Padding" Value="5,2"/>
            <Setter Property="Margin" Value="2"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="DodgerBlue"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="DarkBlue"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Menu -->
        <Style TargetType="MenuItem">
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Padding" Value="5,2"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="DodgerBlue"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- ListView Items -->
        <Style TargetType="ListViewItem">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="Black"/>
            <Style.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                    <Setter Property="Background" Value="#F0F0F0"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="SteelBlue"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="LightSkyBlue"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <!-- ======================= LAYOUT ======================= -->
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Menu -->
            <RowDefinition Height="5"/>
            <!-- Separator -->
            <RowDefinition Height="*"/>
            <!-- Indhold -->
            <RowDefinition Height="Auto"/>
            <!-- Sælg -->
            <RowDefinition Height="*"/>
            <!-- Salgshistorik -->
            <RowDefinition Height="5"/>
            <!-- Separator -->
            <RowDefinition Height="Auto"/>
            <!-- Footer -->
        </Grid.RowDefinitions>

        <!-- ======================= TOPMENU ======================= -->
        <Menu Grid.Row="0" Background="DarkSlateBlue" Foreground="White">
            <MenuItem Header="Kunder">
                <MenuItem Header="Tilføj" Click="AddCustomer_Click"/>
                <MenuItem Header="Rediger" Click="EditCustomer_Click"/>
                <MenuItem Header="Slet" Click="DeleteCustomer_Click"/>
            </MenuItem>

            <MenuItem Header="Reoler">
                <MenuItem Header="Vis ledige" Click="ShowAvailable_Click"/>
                <MenuItem Header="Vis optaget" Click="ShowOccupied_Click"/>
                <MenuItem Header="Vis alle" Click="ShowAll_Click"/>
                <Separator/>
                <MenuItem Header="➕ Tilføj reol" Click="AddRack_Click"/>
                <MenuItem Header="🔄 Skift status" Click="ToggleRackStatus_Click"/>
            </MenuItem>

            <MenuItem Header="Produkt">
                <MenuItem Header="Sælg produkt" Click="SellButton_Click"/>
                <MenuItem Header="Administrer produkter" Click="OpenProductWindow_Click"/>
                <Separator/>
                <MenuItem Header="➕ Tilføj produkt" Click="AddProduct_Click"/>
                <MenuItem Header="✏️ Rediger produkt" Click="EditProduct_Click"/>
                <MenuItem Header="🗑️ Slet produkt" Click="DeleteProduct_Click"/>
                <Separator/>
                <MenuItem Header="🔄 Rediger salg" Click="EditSale_Click"/>
                <MenuItem Header="🗑️ Slet salg" Click="DeleteSale_Click"/>
            </MenuItem>

            <MenuItem Header="Betaling">
                <MenuItem Header="Kort" Tag="Kort" Click="Payment_Click"/>
                <MenuItem Header="Kontant" Tag="Kontant" Click="Payment_Click"/>
                <MenuItem Header="MobilePay" Tag="MobilePay" Click="Payment_Click"/>
            </MenuItem>
        </Menu>

        <!-- Separator -->
        <Border Grid.Row="1" Height="2" Background="Gray" Margin="0,2"/>

        <!-- ======================= INNHOLD (KUNDER / REOLER) ======================= -->
        <Grid Grid.Row="2" Margin="0,10,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Kunder -->
            <Border Grid.Column="0" Background="WhiteSmoke" CornerRadius="8" Padding="10" Margin="5">
                <StackPanel>
                    <TextBlock Text="Kunder"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="DarkBlue"
                               Margin="0,0,0,10"/>
                    <ListView x:Name="CustomerListView"
                              ItemsSource="{Binding Customers}"
                              Height="250"
                              AlternationCount="2"
                              DisplayMemberPath="CustomerName"/>
                </StackPanel>
            </Border>

            <!-- Reoler + bøjler -->
            <Border Grid.Column="1" Background="WhiteSmoke" CornerRadius="8" Padding="10" Margin="5">
                <StackPanel>
                    <TextBlock Text="Reoler &amp; Bøjler"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="DarkGreen"
                               Margin="0,0,0,10"/>

                    <!-- TreeView med racks + hangers -->
                    <TreeView x:Name="RackTree" Height="250">
                        <TreeView.ItemTemplate>
                            <!-- Første niveau = Rack -->
                            <HierarchicalDataTemplate ItemsSource="{Binding Hangers}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding RackId}" Width="50"/>
                                    <TextBlock Text="{Binding RackName}" Width="150" Margin="5,0,0,0"/>
                                    <TextBlock Text="{Binding IsAvailable, Converter={StaticResource BoolToStatusConverter}}" Width="100"/>
                                </StackPanel>

                                <!-- Andet niveau = Hanger -->
                                <HierarchicalDataTemplate.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding HangerId}" Width="50"/>
                                            <TextBlock Text="{Binding HangerName}" Width="150" Margin="5,0,0,0"/>
                                            <TextBlock Text="{Binding IsAvailable, Converter={StaticResource BoolToStatusConverter}}" Width="100"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </HierarchicalDataTemplate.ItemTemplate>
                            </HierarchicalDataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>

                    <!-- Knapper under reoler -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                        <Button Content="➕ Tilføj reol" Width="120" Margin="5" Click="AddRack_Click"/>
                        <Button Content="🔄 Skift status" Width="120" Margin="5" Click="ToggleRackStatus_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>

        <!-- ======================= SÆLG PRODUKT ======================= -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10">
            <TextBlock Text="Indtast/scan stregkode:" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <TextBox x:Name="SellBarcodeTextBox" Width="200" Margin="0,0,10,0"/>
            <Button Content="Sælg" Width="100" Background="LightCoral" Click="SellButton_Click"/>
        </StackPanel>

        <!-- ======================= SALGSHISTORIK ======================= -->
        <Border Grid.Row="4" Background="WhiteSmoke" CornerRadius="8" Padding="10" Margin="5">
            <StackPanel>
                <TextBlock Text="Salgshistorik"
                           FontSize="18"
                           FontWeight="Bold"
                           Foreground="DarkRed"
                           Margin="0,0,0,10"/>
                <ListView x:Name="SalesHistoryListView" Height="150" AlternationCount="2">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Navn" Width="150" DisplayMemberBinding="{Binding ProductName}" />
                            <GridViewColumn Header="Pris" Width="100" DisplayMemberBinding="{Binding Price}" />
                            <GridViewColumn Header="Stregkode" Width="120" DisplayMemberBinding="{Binding Barcode}" />
                            <GridViewColumn Header="Solgt" Width="150" DisplayMemberBinding="{Binding SoldDate}" />
                        </GridView>
                    </ListView.View>
                </ListView>
            </StackPanel>
        </Border>

        <!-- ======================= FOOTER ======================= -->
        <TextBlock Grid.Row="6"
                   Text="Reolmarked 2025"
                   HorizontalAlignment="Center"
                   Foreground="Gray"
                   Margin="0,5"/>
    </Grid>
</Window>
